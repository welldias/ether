#include <stdlib.h>
#include <string.h>

#include "ether_palette.h"

static EtherPalette _default_palette_256 = {
  {
    {  0,   0,   0},
    {  0,   0, 170},
    {  0, 170,   0},
    {  0, 170, 170},
    {170,   0,   0},
    {170,   0, 170},
    {170,  85,   0},
    {170, 170, 170},
    { 85,  85,  85},
    { 85,  85, 255},
    { 85, 255,  85},
    { 85, 255, 255},
    {255,  85,  85},
    {255,  85, 255},
    {255, 255,  85},
    {255, 255, 255},
    { 20,   0,   0},
    { 32,   0,   0},
    { 40,   0,   0},
    { 48,   0,   0},
    { 60,   0,   0},
    { 68,   0,   0},
    { 80,   0,   0},
    { 93,   0,   0},
    {105,   0,   0},
    {121,   0,   0},
    {137,   0,   0},
    {153,   0,   0},
    {174,   0,   0},
    {198,   0,   0},
    {226,   0,   0},
    {255,   0,   0},
    { 20,   8,   0},
    { 32,  16,   0},
    { 40,  16,   0},
    { 48,  24,   0},
    { 60,  28,   0},
    { 68,  32,   0},
    { 80,  40,   0},
    { 93,  44,   0},
    {105,  52,   0},
    {121,  56,   0},
    {137,  64,   0},
    {153,  72,   0},
    {174,  85,   0},
    {198,  97,   0},
    {226, 109,   0},
    {255, 125,   0},
    { 20,   8,   8},
    { 32,  16,  16},
    { 40,  16,  16},
    { 48,  24,  24},
    { 60,  28,  28},
    { 68,  32,  32},
    { 80,  40,  40},
    { 93,  44,  44},
    {105,  52,  52},
    {121,  56,  56},
    {137,  64,  64},
    {153,  72,  72},
    {174,  85,  85},
    {198,  97,  97},
    {226, 109, 109},
    {255, 125, 125},
    { 20,  12,   8},
    { 32,  24,  16},
    { 40,  28,  16},
    { 48,  36,  24},
    { 60,  44,  28},
    { 68,  52,  32},
    { 80,  60,  40},
    { 93,  68,  44},
    {105,  76,  52},
    {121,  89,  56},
    {137, 101,  64},
    {153, 113,  72},
    {174, 129,  85},
    {198, 149,  97},
    {226, 165, 109},
    {255, 190, 125},
    { 20,  20,   8},
    { 32,  32,  16},
    { 40,  40,  16},
    { 48,  48,  24},
    { 60,  60,  28},
    { 68,  68,  32},
    { 80,  80,  40},
    { 93,  93,  44},
    {105, 105,  52},
    {121, 121,  56},
    {137, 137,  64},
    {153, 153,  72},
    {174, 174,  85},
    {198, 198,  97},
    {226, 226, 109},
    {255, 255, 125},
    { 20,  20,   0},
    { 32,  32,   0},
    { 40,  40,   0},
    { 48,  48,   0},
    { 60,  60,   0},
    { 68,  68,   0},
    { 80,  80,   0},
    { 93,  93,   0},
    {105, 105,   0},
    {121, 121,   0},
    {137, 137,   0},
    {153, 153,   0},
    {174, 174,   0},
    {198, 198,   0},
    {226, 226,   0},
    {255, 255,   0},
    {  0,  20,   8},
    {  0,  32,  16},
    {  0,  40,  16},
    {  0,  48,  24},
    {  0,  60,  28},
    {  0,  68,  32},
    {  0,  80,  40},
    {  0,  93,  44},
    {  0, 105,  52},
    {  0, 121,  56},
    {  0, 137,  64},
    {  0, 153,  72},
    {  0, 174,  85},
    {  0, 198,  97},
    {  0, 226, 109},
    {  0, 255, 125},
    {  0,  20,   0},
    {  0,  32,   0},
    {  0,  40,   0},
    {  0,  48,   0},
    {  0,  60,   0},
    {  0,  68,   0},
    {  0,  80,   0},
    {  0,  93,   0},
    {  0, 105,   0},
    {  0, 121,   0},
    {  0, 137,   0},
    {  0, 153,   0},
    {  0, 174,   0},
    {  0, 198,   0},
    {  0, 226,   0},
    {  0, 255,   0},
    {  0,  20,  12},
    {  0,  32,  24},
    {  0,  40,  28},
    {  0,  48,  36},
    {  0,  60,  44},
    {  0,  68,  52},
    {  0,  80,  60},
    {  0,  93,  68},
    {  0, 105,  76},
    {  0, 121,  89},
    {  0, 137, 101},
    {  0, 153, 113},
    {  0, 174, 129},
    {  0, 198, 149},
    {  0, 226, 165},
    {  0, 255, 190},
    {  0,  12,  20},
    {  0,  24,  32},
    {  0,  28,  40},
    {  0,  36,  48},
    {  0,  44,  60},
    {  0,  52,  68},
    {  0,  60,  80},
    {  0,  68,  93},
    {  0,  76, 105},
    {  0,  89, 121},
    {  0, 101, 137},
    {  0, 113, 153},
    {  0, 129, 174},
    {  0, 149, 198},
    {  0, 165, 226},
    {  0, 190, 255},
    {  0,   0,  20},
    {  0,   0,  32},
    {  0,   0,  40},
    {  0,   0,  48},
    {  0,   0,  60},
    {  0,   0,  68},
    {  0,   0,  80},
    {  0,   0,  93},
    {  0,   0, 105},
    {  0,   0, 121},
    {  0,   0, 137},
    {  0,   0, 153},
    {  0,   0, 174},
    {  0,   0, 198},
    {  0,   0, 226},
    {  0,   0, 255},
    { 20,   0,  20},
    { 32,   0,  32},
    { 40,   0,  40},
    { 48,   0,  48},
    { 60,   0,  60},
    { 68,   0,  68},
    { 80,   0,  80},
    { 93,   0,  93},
    {105,   0, 105},
    {121,   0, 121},
    {137,   0, 137},
    {153,   0, 153},
    {174,   0, 174},
    {198,   0, 198},
    {226,   0, 226},
    {255,   0, 255},
    { 20,   0,  12},
    { 32,   0,  24},
    { 40,   0,  28},
    { 48,   0,  36},
    { 60,   0,  44},
    { 68,   0,  52},
    { 80,   0,  60},
    { 93,   0,  68},
    {105,   0,  76},
    {121,   0,  89},
    {137,   0, 101},
    {153,   0, 113},
    {174,   0, 129},
    {198,   0, 149},
    {226,   0, 165},
    {255,   0, 190},
    {  8,   8,   8},
    { 16,  16,  16},
    { 20,  20,  20},
    { 24,  24,  24},
    { 28,  28,  28},
    { 32,  32,  32},
    { 40,  40,  40},
    { 44,  44,  44},
    { 52,  52,  52},
    { 60,  60,  60},
    { 68,  68,  68},
    { 76,  76,  76},
    { 89,  89,  89},
    {101, 101, 101},
    {113, 113, 113},
    {129, 129, 129},
    { 20,  20,  20},
    { 32,  32,  32},
    { 40,  40,  40},
    { 48,  48,  48},
    { 60,  60,  60},
    { 68,  68,  68},
    { 80,  80,  80},
    { 93,  93,  93},
    {105, 105, 105},
    {121, 121, 121},
    {137, 137, 137},
    {153, 153, 153},
    {174, 174, 174},
    {198, 198, 198},
    {226, 226, 226},
    {255, 255, 255},
  },
  {
    {  0,  15 }, {  16, 15 }, {  32, 15 }, {  48, 15 },
    { 64,  15 }, {  80, 15 }, {  96, 15 }, { 112, 15 },
    { 128, 15 }, { 144, 15 }, { 160, 15 }, { 176, 15 },
    { 192, 15 }, { 208, 15 }, { 224, 15 }, { 240, 15 }
  },
  1
};

static EtherPalette _default_palette_16 =
{
  {
    {  0,   0,   0},
    {105,   0,   0},
    {105,  52,   0},
    {105,  52,  52},
    {105,  76,  52},
    {105, 105,  52},
    {105, 105,   0},
    {  0, 105,  52},
    {  0, 105,   0},
    {  0, 105,  76},
    {  0,  76, 105},
    {  0,   0, 105},
    {105,   0, 105},
    {105,   0,  76},
    { 52,  52,  52},
    {255, 255, 255},
  },
  {
    {  0, 3 }, 
    {  4, 3 }, 
    {  8, 3 }, 
    { 12, 3 }
  },
  1
};

static EtherPalette _anaglyph_palette =
{
  {
    {  0,   0,   0},
    {  0,   0, 170},
    {  0, 170,   0},
    {  0, 170, 170},
    {170,   0,   0},
    {170,   0, 170},
    {170,  85,   0},
    {170, 170, 170},
    { 85,  85,  85},
    { 85,  85, 255},
    { 85, 255,  85},
    { 85, 255, 255},
    {255,  85,  85},
    {255,  85, 255},
    {255, 255,  85},
    {255, 255, 255},
    {  0,   0,   0},
    {  4,   0,   0},
    {  8,   0,   0},
    { 12,   0,   0},
    { 16,   0,   0},
    { 20,   0,   0},
    { 24,   0,   0},
    { 28,   0,   0},
    { 32,   0,   0},
    { 36,   0,   0},
    { 40,   0,   0},
    { 44,   0,   0},
    { 48,   0,   0},
    { 52,   0,   0},
    { 56,   0,   0},
    { 60,   0,   0},
    { 64,   0,   0},
    { 68,   0,   0},
    { 72,   0,   0},
    { 76,   0,   0},
    { 80,   0,   0},
    { 85,   0,   0},
    { 89,   0,   0},
    { 93,   0,   0},
    { 97,   0,   0},
    {101,   0,   0},
    {105,   0,   0},
    {109,   0,   0},
    {113,   0,   0},
    {117,   0,   0},
    {121,   0,   0},
    {125,   0,   0},
    {129,   0,   0},
    {133,   0,   0},
    {137,   0,   0},
    {141,   0,   0},
    {145,   0,   0},
    {149,   0,   0},
    {153,   0,   0},
    {157,   0,   0},
    {161,   0,   0},
    {165,   0,   0},
    {170,   0,   0},
    {174,   0,   0},
    {178,   0,   0},
    {182,   0,   0},
    {186,   0,   0},
    {190,   0,   0},
    {194,   0,   0},
    {198,   0,   0},
    {202,   0,   0},
    {206,   0,   0},
    {210,   0,   0},
    {214,   0,   0},
    {218,   0,   0},
    {222,   0,   0},
    {226,   0,   0},
    {230,   0,   0},
    {234,   0,   0},
    {238,   0,   0},
    {242,   0,   0},
    {246,   0,   0},
    {250,   0,   0},
    {255,   0,   0},
    {  0,   0,   0},
    {  0,   0,   4},
    {  0,   0,   8},
    {  0,   0,  12},
    {  0,   0,  16},
    {  0,   0,  20},
    {  0,   0,  24},
    {  0,   0,  28},
    {  0,   0,  32},
    {  0,   0,  36},
    {  0,   0,  40},
    {  0,   0,  44},
    {  0,   0,  48},
    {  0,   0,  52},
    {  0,   0,  56},
    {  0,   0,  60},
    {  0,   0,  64},
    {  0,   0,  68},
    {  0,   0,  72},
    {  0,   0,  76},
    {  0,   0,  80},
    {  0,   0,  85},
    {  0,   0,  89},
    {  0,   0,  93},
    {  0,   0,  97},
    {  0,   0, 101},
    {  0,   0, 105},
    {  0,   0, 109},
    {  0,   0, 113},
    {  0,   0, 117},
    {  0,   0, 121},
    {  0,   0, 125},
    {  0,   0, 129},
    {  0,   0, 133},
    {  0,   0, 137},
    {  0,   0, 141},
    {  0,   0, 145},
    {  0,   0, 149},
    {  0,   0, 153},
    {  0,   0, 157},
    {  0,   0, 161},
    {  0,   0, 165},
    {  0,   0, 170},
    {  0,   0, 174},
    {  0,   0, 178},
    {  0,   0, 182},
    {  0,   0, 186},
    {  0,   0, 190},
    {  0,   0, 194},
    {  0,   0, 198},
    {  0,   0, 202},
    {  0,   0, 206},
    {  0,   0, 210},
    {  0,   0, 214},
    {  0,   0, 218},
    {  0,   0, 222},
    {  0,   0, 226},
    {  0,   0, 230},
    {  0,   0, 234},
    {  0,   0, 238},
    {  0,   0, 242},
    {  0,   0, 246},
    {  0,   0, 250},
    {  0,   0, 255},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
  },
  {{ 0 }},
  1
};

static EtherPalette _chromadepth_palette =
{
  {
    {  0,   0,   0},
    {  0, 170, 170},
    {170,  85,   0},
    { 85,  85, 255},
    {255,  85,  85},
    {255, 255, 255},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {  0,   0,   0},
    {255,   0,   0},
    {255,   4,   0},
    {255,   8,   0},
    {255,  12,   0},
    {255,  16,   0},
    {255,  20,   0},
    {255,  24,   0},
    {255,  28,   0},
    {255,  32,   0},
    {255,  36,   0},
    {255,  40,   0},
    {255,  44,   0},
    {255,  48,   0},
    {255,  52,   0},
    {255,  56,   0},
    {255,  64,   0},
    {255,  68,   0},
    {255,  72,   0},
    {255,  76,   0},
    {255,  80,   0},
    {255,  85,   0},
    {255,  89,   0},
    {255,  93,   0},
    {255,  97,   0},
    {255, 101,   0},
    {255, 105,   0},
    {255, 109,   0},
    {255, 113,   0},
    {255, 117,   0},
    {255, 121,   0},
    {255, 129,   0},
    {255, 133,   0},
    {255, 137,   0},
    {255, 141,   0},
    {255, 145,   0},
    {255, 149,   0},
    {255, 153,   0},
    {255, 157,   0},
    {255, 161,   0},
    {255, 165,   0},
    {255, 170,   0},
    {255, 174,   0},
    {255, 178,   0},
    {255, 182,   0},
    {255, 186,   0},
    {255, 190,   0},
    {255, 198,   0},
    {255, 202,   0},
    {255, 206,   0},
    {255, 210,   0},
    {255, 214,   0},
    {255, 218,   0},
    {255, 222,   0},
    {255, 226,   0},
    {255, 230,   0},
    {255, 234,   0},
    {255, 238,   0},
    {255, 242,   0},
    {255, 246,   0},
    {255, 250,   0},
    {255, 255,   0},
    {246, 255,   0},
    {242, 255,   0},
    {238, 255,   0},
    {234, 255,   0},
    {230, 255,   0},
    {226, 255,   0},
    {222, 255,   0},
    {218, 255,   0},
    {214, 255,   0},
    {210, 255,   0},
    {206, 255,   0},
    {202, 255,   0},
    {198, 255,   0},
    {194, 255,   0},
    {190, 255,   0},
    {182, 255,   0},
    {178, 255,   0},
    {174, 255,   0},
    {170, 255,   0},
    {165, 255,   0},
    {161, 255,   0},
    {157, 255,   0},
    {153, 255,   0},
    {149, 255,   0},
    {145, 255,   0},
    {141, 255,   0},
    {137, 255,   0},
    {133, 255,   0},
    {129, 255,   0},
    {125, 255,   0},
    {117, 255,   0},
    {113, 255,   0},
    {109, 255,   0},
    {105, 255,   0},
    {101, 255,   0},
    { 97, 255,   0},
    { 93, 255,   0},
    { 89, 255,   0},
    { 85, 255,   0},
    { 80, 255,   0},
    { 76, 255,   0},
    { 72, 255,   0},
    { 68, 255,   0},
    { 64, 255,   0},
    { 60, 255,   0},
    { 52, 255,   0},
    { 48, 255,   0},
    { 44, 255,   0},
    { 40, 255,   0},
    { 36, 255,   0},
    { 32, 255,   0},
    { 28, 255,   0},
    { 24, 255,   0},
    { 20, 255,   0},
    { 16, 255,   0},
    { 12, 255,   0},
    {  8, 255,   0},
    {  4, 255,   0},
    {  0, 255,   0},
    {  0, 255,   0},
    {  0, 255,   4},
    {  0, 255,   8},
    {  0, 255,  12},
    {  0, 255,  16},
    {  0, 255,  20},
    {  0, 255,  24},
    {  0, 255,  28},
    {  0, 255,  32},
    {  0, 255,  36},
    {  0, 255,  40},
    {  0, 255,  44},
    {  0, 255,  48},
    {  0, 255,  52},
    {  0, 255,  56},
    {  0, 255,  64},
    {  0, 255,  68},
    {  0, 255,  72},
    {  0, 255,  76},
    {  0, 255,  80},
    {  0, 255,  85},
    {  0, 255,  89},
    {  0, 255,  93},
    {  0, 255,  97},
    {  0, 255, 101},
    {  0, 255, 105},
    {  0, 255, 109},
    {  0, 255, 113},
    {  0, 255, 117},
    {  0, 255, 121},
    {  0, 255, 129},
    {  0, 255, 133},
    {  0, 255, 137},
    {  0, 255, 141},
    {  0, 255, 145},
    {  0, 255, 149},
    {  0, 255, 153},
    {  0, 255, 157},
    {  0, 255, 161},
    {  0, 255, 165},
    {  0, 255, 170},
    {  0, 255, 174},
    {  0, 255, 178},
    {  0, 255, 182},
    {  0, 255, 186},
    {  0, 255, 190},
    {  0, 255, 198},
    {  0, 255, 202},
    {  0, 255, 206},
    {  0, 255, 210},
    {  0, 255, 214},
    {  0, 255, 218},
    {  0, 255, 222},
    {  0, 255, 226},
    {  0, 255, 230},
    {  0, 255, 234},
    {  0, 255, 238},
    {  0, 255, 242},
    {  0, 255, 246},
    {  0, 255, 250},
    {  0, 255, 255},
    {  0, 250, 255},
    {  0, 246, 255},
    {  0, 242, 255},
    {  0, 238, 255},
    {  0, 234, 255},
    {  0, 230, 255},
    {  0, 226, 255},
    {  0, 222, 255},
    {  0, 218, 255},
    {  0, 214, 255},
    {  0, 210, 255},
    {  0, 206, 255},
    {  0, 202, 255},
    {  0, 198, 255},
    {  0, 190, 255},
    {  0, 186, 255},
    {  0, 182, 255},
    {  0, 178, 255},
    {  0, 174, 255},
    {  0, 170, 255},
    {  0, 165, 255},
    {  0, 161, 255},
    {  0, 157, 255},
    {  0, 153, 255},
    {  0, 149, 255},
    {  0, 145, 255},
    {  0, 141, 255},
    {  0, 137, 255},
    {  0, 133, 255},
    {  0, 129, 255},
    {  0, 121, 255},
    {  0, 117, 255},
    {  0, 113, 255},
    {  0, 109, 255},
    {  0, 105, 255},
    {  0, 101, 255},
    {  0,  97, 255},
    {  0,  93, 255},
    {  0,  89, 255},
    {  0,  85, 255},
    {  0,  80, 255},
    {  0,  76, 255},
    {  0,  72, 255},
    {  0,  68, 255},
    {  0,  60, 255},
    {  0,  56, 255},
    {  0,  52, 255},
    {  0,  48, 255},
    {  0,  44, 255},
    {  0,  40, 255},
    {  0,  36, 255},
    {  0,  32, 255},
    {  0,  28, 255},
    {  0,  24, 255},
    {  0,  20, 255},
    {  0,  16, 255},
    {  0,  12, 255},
    {  0,   8, 255},
    {  0,   4, 255},
  },
  {{ 0 }},
  1
};

void
ether_palette_init(EtherPalette *pal)
{
    if(pal) {
        memcpy(pal, &_default_palette_256, sizeof(_default_palette_256));
    }
}

int ether_palette_read(EtherPalette *pal, FILE *in) {
    if(pal == NULL || in == NULL) 
        return -1;
        
    ether_palette_init(pal);
    if(fread(pal->data, 3, 256, in) != 256) 
        return -2;
        
    fread(pal->huemap, 2, 256, in);
    pal->changed = 1;
    return 0;
}

EtherColor ether_palette_entry_get(EtherPalette *pal, int n) {
    return (((EtherColor) pal->data[n][0]) << 16)
        + (((EtherColor) pal->data[n][1]) << 8)
        + ((EtherColor) pal->data[n][2]);
}

void ether_palette_entry_set(EtherPalette *pal, int n, EtherColor color) {
    pal->data[n][0] = (char)color >> 16;
    pal->data[n][1] = (char)color >> 8;
    pal->data[n][2] = (char)color;
}

int ether_palette_has_changed(EtherPalette *pal) {
    if(pal)
        return (pal)->changed;
    else
        return 0;
}

void ether_palette_changed_set(EtherPalette *pal, int flag) {
    if(pal)
        pal->changed = flag;
}

EtherHue * ether_palette_huemap_get(EtherPalette *pal) {
    if(pal)
        return pal->huemap;
    else
        return NULL;
}

EtherPalette* ether_palette_default_palette_256_get(void) {
	return &_default_palette_256;
}

EtherPalette* ether_palette_default_palette_16_get(void) {
	return &_default_palette_16;
}

EtherPalette * ether_palette_anaglyph_palette_get(void) {
	return &_anaglyph_palette;
}

EtherPalette * ether_palette_chromadepth_palette_get(void) {
	return &_chromadepth_palette;
}
